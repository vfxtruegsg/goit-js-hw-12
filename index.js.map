{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46841282-5db11f3b406bb735b1a036109';\n\nexport async function fetchData(searchQuery, page) {\n  try {\n    const response = await axios(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching data from Pixabay');\n  }\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\" />\n          </a>\n          <div class=\"description\">\n            <ul class=\"list-points\">\n              <li class=\"items-points\"><p>Likes</p><p>${likes}</p></li>\n              <li class=\"items-points\"><p>Views</p><p>${views}</p></li>\n              <li class=\"items-points\"><p>Comments</p><p>${comments}</p></li>\n              <li class=\"items-points\"><p>Downloads</p><p>${downloads}</p></li>\n            </ul>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n}\n\nexport function smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 4.5,\n      behavior: 'smooth',\n    });\n  }\n}\n","import { fetchData } from './js/pixabay-api.js';\nimport { createMarkup, smoothScroll } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-container');\nconst list = document.querySelector('.list-photo');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-more-btn');\n\nloadButton.style.display = 'none';\n\nlet page = 1;\nlet totalHits = 0;\nlet loadedHits = 0;\nlet currentSearchQuery = '';\n\nconst gallery = new SimpleLightbox('.gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', searchPictures);\nloadButton.addEventListener('click', loadMorePictures);\n\nasync function searchPictures(event) {\n  event.preventDefault();\n  currentSearchQuery = event.target.elements.query.value.trim();\n  if (!currentSearchQuery) {\n    iziToast.error({\n      title: '❌',\n      message: 'Please enter your request',\n      position: 'topRight',\n      timeout: 3000,\n      transitionIn: 'fadeInLeft',\n      transitionOut: 'fadeOutRight',\n    });\n    return;\n  }\n\n  loader.style.opacity = '1';\n  page = 1;\n  loadedHits = 0;\n\n  try {\n    const data = await fetchData(currentSearchQuery, page);\n    totalHits = data.totalHits;\n\n    if (!totalHits) {\n      iziToast.error({\n        title: '❌',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n        transitionIn: 'fadeInLeft',\n        transitionOut: 'fadeOutRight',\n      });\n      loadButton.style.display = 'none';\n      return;\n    }\n\n    list.innerHTML = createMarkup(data.hits);\n    loadedHits = data.hits.length;\n    gallery.refresh();\n\n    loadButton.style.display = loadedHits < totalHits ? 'block' : 'none';\n\n    smoothScroll();\n  } catch (error) {\n    console.error('Error fetching initial pictures:', error);\n  } finally {\n    loader.style.opacity = '0';\n  }\n}\n\nasync function loadMorePictures() {\n  page += 1;\n\n  try {\n    const data = await fetchData(currentSearchQuery, page);\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    gallery.refresh();\n\n    loadedHits += data.hits.length;\n\n    if (loadedHits >= totalHits) {\n      loadButton.style.display = 'none';\n      iziToast.info({\n        title: '❗',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 3000,\n        transitionIn: 'fadeInLeft',\n        transitionOut: 'fadeOutRight',\n      });\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.error('Error loading more pictures:', error);\n    iziToast.error({\n      title: '❌',\n      message: 'Failed to load more images. Please try again!',\n      position: 'topRight',\n      timeout: 3000,\n      transitionIn: 'fadeInLeft',\n      transitionOut: 'fadeOutRight',\n    });\n  }\n}\n"],"names":["BASE_URL","API_KEY","fetchData","searchQuery","page","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","smoothScroll","galleryItem","itemHeight","form","list","loader","loadButton","totalHits","loadedHits","currentSearchQuery","gallery","SimpleLightbox","searchPictures","loadMorePictures","event","iziToast","data","error"],"mappings":"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"}